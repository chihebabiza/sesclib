<%- include('../parts/head') %>

    <div class="container mt-5">
        <h1 class="mb-4">
            <%= major.name %> Submajors
        </h1>
        <div class="container my-5">
            <nav aria-label="breadcrumb">
                <ol class="breadcrumb p-3 bg-body-tertiary rounded-3">
                    <li class="breadcrumb-item"><a href="/dashboard/majors">Majors</a></li>
                    <li class="breadcrumb-item active" aria-current="page">Submajors</li>
                </ol>
            </nav>
        </div>
        <a href="/dashboard/major/<%= major._id %>/submajor/add" class="btn btn-success mb-4">Add Submajor</a>
        <table class="table table-bordered">
            <thead>
                <tr>
                    <th>Year</th>
                    <th>Submajor</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                <% years.forEach((year)=> { %>
                    <% if (year.hasSubmajors.length> 0) { %>
                        <% year.hasSubmajors.forEach((submajor)=> { %>
                            <tr>
                                <td><strong>
                                        <%= year.name %>
                                    </strong></td>
                                <td>
                                    <%= submajor.name %>
                                </td>
                                <td>
                                    <a href="/dashboard/major/<%= major._id%>/submajor/update/<%= submajor._id %>"
                                        class="btn btn-warning btn-sm">Update</a>
                                    <form action="/dashboard/major/<%= major._id%>/submajor/delete/<%= submajor._id %>"
                                        method="POST" style="display:inline;">
                                        <button type="submit" class="btn btn-danger btn-sm"
                                            onclick="return confirm('Are you sure you want to delete this submajor?');">Delete</button>
                                    </form>
                                    <a href="/dashboard/major/<%= major._id %>/year/<%= year._id %>/subjects"
                                        class="btn btn-info btn-sm">View Subjects</a>
                                </td>
                            </tr>
                            <% }) %>
                                <% } else { %>
                                    <tr>
                                        <td><strong>
                                                <%= year.name %>
                                            </strong></td>
                                        <td>No submajors available</td>
                                        <td>
                                            <a href="/dashboard/major/<%= major._id %>/year/<%= year._id %>/subjects"
                                                class="btn btn-info btn-sm">View Subjects</a>
                                        </td>
                                    </tr>
                                    <% } %>
                                        <% }) %>
            </tbody>
        </table>
    </div>